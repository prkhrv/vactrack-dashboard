"use strict";(self.webpackChunk_coreui_coreui_pro_react_admin_template=self.webpackChunk_coreui_coreui_pro_react_admin_template||[]).push([[7272],{47272:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var l=a(65043),t=(a(98139),a(37924)),i=a(42315),r=(a(52530),a(63401)),o=a(28131),n=a(6145),d=a(77823),c=a(70579);const u=e=>{let{show:s,handleClose:a}=e;const[o,n]=(0,l.useState)(!1),[d,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1),[x,g]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[C,y]=(0,l.useState)(""),[b,k]=(0,l.useState)(""),[_,S]=(0,l.useState)(""),[w,G]=(0,l.useState)([]);(0,l.useEffect)((()=>(async function(){n(!0);const e=await(0,i.iF)("/groups/fetch");return 200!==e.statusCode?(n(!1),r.oR.error("Cannot Fetch Data"),[]):(n(!1),e.data)}().then((e=>{(e=>{var s=[];e.forEach((e=>{s.push((0,c.jsx)("option",{value:e._id,children:e.name}))})),G(s)})(e)})),()=>{n(!1)})),[]);const E=e=>{/^[a-zA-Z\s]{5,}$/.test(e)?m(!0):m(!1)},N=e=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?v(!0):v(!1)},A=e=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{12,}$/.test(e)?g(!0):g(!1)},P=e=>{f(""!==e)};return(0,c.jsxs)(t.zS,{visible:s,onClose:()=>a(),"aria-labelledby":"AddUserModal",size:"lg",children:[(0,c.jsx)(t.E4,{closeButton:!0,children:(0,c.jsx)(t.lb,{children:"Add User"})}),(0,c.jsx)(t.Tc,{children:(0,c.jsxs)(t.qI,{children:[(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Group"}),(0,c.jsxs)(t.MT,{custom:!0,id:"group",value:C,onChange:e=>{y(e.target.value),P(e.target.value)},valid:j,invalid:!j,feedbackValid:"Looks good!",feedbackInvalid:"Please select a group",children:[(0,c.jsx)("option",{value:"",children:"Select Group"}),w]})]}),(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Name"}),(0,c.jsx)(t.OG,{id:"userName",placeholder:"Enter name",value:d,valid:h,invalid:!h,onChange:e=>{u(e.target.value),E(e.target.value)},feedbackValid:"Looks good!",feedbackInvalid:"Please enter a valid name",required:!0})]}),(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Email"}),(0,c.jsx)(t.OG,{type:"email",id:"email",placeholder:"Enter email",value:_,valid:p,invalid:!p,onChange:e=>{S(e.target.value),N(e.target.value)},feedbackValid:"Looks good!",feedbackInvalid:"Please enter a valid email",required:!0,autoComplete:"email"})]}),(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Password"}),(0,c.jsx)(t.OG,{type:"password",id:"password",placeholder:"Enter a secure password",value:b,onChange:e=>{k(e.target.value),A(e.target.value)},valid:x,invalid:!x,feedbackValid:"Looks good!",feedbackInvalid:"Password must be at least 12 characters long and contain at least one lowercase letter, one uppercase letter, one number, and one symbol.",required:!0,autoComplete:"password"})]})]})}),(0,c.jsxs)(t.If,{children:[(0,c.jsx)(t.Q_,{color:"secondary",onClick:a,children:"Close"}),(0,c.jsx)(t.Q_,{color:"primary",onClick:async e=>{if(h&&p&&x&&j){const e={name:d,email:_,password:b,group:C},s=await(0,i.iF)("/university-admins",e);201!==s.statusCode&&403!==s.statusCode?r.oR.error("Cannot Add User"):403===s.statusCode?r.oR.error("You don't have permission to perform this action"):(r.oR.success("User Added Successfully"),a(!0))}else r.oR.error("Please fill all the fields correctly")},children:"Add User"})]})]})},h=e=>{let{title:s,show:a,handleClose:l,handleConfirm:i}=e;return(0,c.jsxs)(t.zS,{visible:a,onClose:()=>l(),"aria-labelledby":"AddUserModal",size:"lg",children:[(0,c.jsx)(t.E4,{closeButton:!0,children:(0,c.jsx)(t.lb,{children:s})}),(0,c.jsx)(t.Tc,{children:(0,c.jsx)("p",{children:"Are you sure you want to proceed? This action cannot be undone."})}),(0,c.jsxs)(t.If,{children:[(0,c.jsx)(t.Q_,{color:"secondary",onClick:l,children:"Cancel"}),(0,c.jsx)(t.Q_,{color:"primary",onClick:i,children:"Confirm"})]})]})},m=e=>{let{show:s,handleClose:a,user:o}=e;const[n,d]=(0,l.useState)(!1),[u,h]=(0,l.useState)(""),[m,p]=(0,l.useState)(!1),[v,x]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[f,C]=(0,l.useState)(!1),[y,b]=(0,l.useState)(""),[k,_]=(0,l.useState)(""),[S,w]=(0,l.useState)(""),[G,E]=(0,l.useState)([]),[N,A]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(s)return async function(){d(!0);const e=await(0,i.iF)("/groups/fetch");return 200!==e.statusCode?(d(!1),r.oR.error("Cannot Fetch Data"),[]):(d(!1),e.data)}().then((e=>{(e=>{var s=[];e.forEach((e=>{s.push((0,c.jsx)("option",{value:e._id,children:e.name}))})),E(s)})(e)})),o.group&&(console.log("Set User data"),h(o.name),w(o.email),b(o.group._id),A(o.is_active),P(o.name),z(o.email),U(o.group._id)),()=>{d(!1)}}),[s]);const P=e=>{/^[a-zA-Z\s]{5,}$/.test(e)?p(!0):p(!1)},z=e=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?x(!0):x(!1)},U=e=>{C(""!==e)};return(0,c.jsxs)(t.zS,{visible:s,onClose:()=>a(),"aria-labelledby":"EditUserModal",size:"lg",children:[(0,c.jsx)(t.E4,{closeButton:!0,children:(0,c.jsx)(t.lb,{children:"Edit User"})}),(0,c.jsx)(t.Tc,{children:(0,c.jsxs)(t.qI,{children:[(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Group"}),(0,c.jsxs)(t.MT,{custom:!0,id:"group",value:y,onChange:e=>{b(e.target.value),U(e.target.value)},valid:f,invalid:!f,feedbackValid:"Looks good!",feedbackInvalid:"Please select a group",children:[(0,c.jsx)("option",{value:"",children:"Select Group"}),G]})]}),(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Name"}),(0,c.jsx)(t.OG,{id:"userName",placeholder:"Enter name",value:u,valid:m,invalid:!m,onChange:e=>{h(e.target.value),P(e.target.value)},feedbackValid:"Looks good!",feedbackInvalid:"Please enter a valid name",required:!0})]}),(0,c.jsxs)(t.BG,{className:"mb-3",children:[(0,c.jsx)(t.sk,{id:"inputGroup-sizing-default",children:"Email"}),(0,c.jsx)(t.OG,{type:"email",id:"email",placeholder:"Enter email",value:S,valid:v,invalid:!v,onChange:e=>{w(e.target.value),z(e.target.value)},feedbackValid:"Looks good!",feedbackInvalid:"Please enter a valid email",required:!0,autoComplete:"email"})]}),(0,c.jsx)(t.BG,{className:"mb-3",children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,c.jsx)("p",{children:"Is active"}),(0,c.jsx)(t.Qb,{style:{marginLeft:"10px"},id:"is_active",name:"is_active",label:"",checked:N,onChange:e=>{A(e.target.checked)},reverse:!0})]})})]})}),(0,c.jsxs)(t.If,{children:[(0,c.jsx)(t.Q_,{color:"secondary",onClick:a,children:"Close"}),(0,c.jsx)(t.Q_,{color:"primary",onClick:async e=>{if(m&&v&&f){const e={id:o._id,data:{name:u,email:S,group:y,is_active:N}},s=await(0,i.iF)("/university-admins/profile/edit",e);console.log(s),200!==s.statusCode&&403!==s.statusCode?r.oR.error("Cannot Edit User"):403===s.statusCode?r.oR.error("You don't have permission to perform this action"):(r.oR.success("Profile Edited Successfully"),a(!0))}else r.oR.error("Please fill all the fields correctly")},children:"Edit User"})]})]})},p=()=>{const[e,s]=(0,l.useState)([]),[a,p]=(0,l.useState)(!1),[v,x]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[f,C]=(0,l.useState)(!1),[y,b]=(0,l.useState)([]),[k,_]=(0,l.useState)("null"),[S,w]=(0,l.useState)({}),G=o.A.getPermissions().find((e=>"Users"===e.name)),E=!!G&&G.create,N=(e,s)=>{_(s),j(e)};async function A(){p(!0);const e=await(0,i.iF)("/university-admins/fetch");return 200!==e.statusCode?(r.oR.error("Cannot Fetch Data"),[]):e.data}(0,l.useEffect)((()=>{A().then((e=>{b(e),p(!1)}))}),[]);return(0,c.jsxs)("div",{children:[(0,c.jsx)(u,{show:v,handleClose:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&A().then((e=>{b(e),p(!1)})),x(!1)}}),(0,c.jsx)(h,{title:"Confirm Action",show:g,handleConfirm:()=>async function(){console.log("Delete user ".concat(k)),p(!0);const e={id:k},s=await(0,i.iF)("/university-admins/profile/delete",e);200===s.statusCode?(r.oR.success("User Deleted Successfully"),await A().then((e=>{b(e),p(!1)}))):(p(!1),403===s.statusCode?r.oR.error("You don't have permission to perform this action"):r.oR.error("Cannot Delete User")),j(!1)}(),handleClose:()=>N(!1,"null")}),(0,c.jsx)(m,{show:f,handleClose:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&A().then((e=>{b(e),p(!1)})),w({}),C(!1)},user:S}),(0,c.jsx)(t.E$,{className:"mb",children:(0,c.jsxs)(t.W6,{children:[(0,c.jsxs)(t.sK,{children:[(0,c.jsx)(t.UF,{sm:5,children:(0,c.jsx)("div",{children:(0,c.jsx)("h5",{children:(0,c.jsx)("strong",{children:"Users"})})})}),(0,c.jsx)(t.UF,{sm:7,className:"d-none d-md-block",children:E&&(0,c.jsxs)(t.Q_,{color:"primary",className:"float-end",style:{marginRight:"10px"},onClick:()=>{x(!v)},children:[(0,c.jsx)(n.A,{icon:d.S,className:"text-light"}),(0,c.jsx)("span",{style:{marginLeft:"5px",color:"white"},children:"Add User"})]})})]}),(0,c.jsx)(t.Pd,{activePage:1,cleaner:!0,clickableRows:!0,columns:[{key:"sr",label:"#",filter:!1,sorter:!1,_style:{width:"1%"}},{key:"name",_style:{width:"20%"}},{key:"email",_style:{width:"20%"}},{key:"group",label:"Group",_style:{width:"20%"}},{label:"Status",key:"is_active",_style:{width:"20%"}},{key:"show_details",label:"",_style:{width:"1%"},filter:!1,sorter:!1}],columnFilter:!0,columnSorter:!0,loading:a,items:y,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,onFilteredItemsChange:e=>{console.log(e)},onSelectedItemsChange:e=>{console.log(e)},scopedColumns:{sr:(e,s)=>(0,c.jsx)("td",{children:s+1}),group:e=>(0,c.jsx)("td",{children:(0,c.jsx)("p",{children:e.group.name})}),is_active:e=>{return(0,c.jsx)("td",{children:(0,c.jsx)("h5",{children:(0,c.jsx)(t.$X,{color:(s=e.is_active,s?"success":"danger"),children:e.is_active?"Active":"Inactive"})})});var s},show_details:a=>(0,c.jsx)("td",{className:"py-2",children:(0,c.jsx)(t.Q_,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:()=>{(a=>{const l=e.indexOf(a);let t=e.slice();-1!==l?t.splice(l,1):t=[...e,a],s(t)})(a._id)},children:e.includes(a._id)?"Hide":"Show"})}),details:s=>{return(0,c.jsx)(t.x8,{visible:e.includes(s._id),children:(0,c.jsxs)(t.W6,{className:"p-3",children:[(0,c.jsxs)("p",{className:"text-muted",children:["User since: ",(a=s.created_date,new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}))]}),(0,c.jsx)(t.Q_,{size:"sm",color:"info",style:{marginRight:"10px"},onClick:()=>{return e=!f,w(s),void C(e);var e},children:"Edit Profile"}),(0,c.jsx)(t.Q_,{size:"sm",color:"danger",className:"ml-1",onClick:()=>N(!g,s._id),children:"Delete"})]})});var a}},sorterValue:{column:"status",state:"asc"},tableFilter:!0,tableProps:{className:"add-this-class",responsive:!0,striped:!0,hover:!0},tableBodyProps:{className:"align-middle"}})]})})]})}},77823:(e,s,a)=>{a.d(s,{S:()=>l});var l=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M208,16A112.127,112.127,0,0,0,96,128v79.681a80.236,80.236,0,0,0,9.768,38.308l27.455,50.333L60.4,343.656A79.725,79.725,0,0,0,24,410.732V496H312V464H56V410.732a47.836,47.836,0,0,1,21.841-40.246l97.66-63.479-41.64-76.341A48.146,48.146,0,0,1,128,207.681V128a80,80,0,0,1,160,0v79.681a48.146,48.146,0,0,1-5.861,22.985L240.5,307.007,312,353.483V315.317l-29.223-19,27.455-50.334A80.23,80.23,0,0,0,320,207.681V128A112.127,112.127,0,0,0,208,16Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='424 400 424 336 392 336 392 400 328 400 328 432 392 432 392 496 424 496 424 432 488 432 488 400 424 400' class='ci-primary'/>"]}}]);
//# sourceMappingURL=7272.7e4e4f7b.chunk.js.map