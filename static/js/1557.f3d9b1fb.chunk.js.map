{"version":3,"file":"static/js/1557.f3d9b1fb.chunk.js","mappings":"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","sources":["components/vactrack/VactrackAlert.js","utils/apiService.js","views/pages/mfa/Mfa.js","../node_modules/@coreui/icons/src/free/cil-lock-locked.ts"],"sourcesContent":["import React from 'react'\r\nimport { CToast, CToastBody, CToastClose } from '@coreui/react-pro';\r\n\r\nconst VactrackAlert = (text,color=\"danger\") => {    \r\n    return (\r\n        <CToast autohide={true} visible={true} color={color} className=\"text-white align-items-center\">\r\n            <div className=\"d-flex\">\r\n                <CToastBody>{text}</CToastBody>\r\n                <CToastClose className=\"me-2 m-auto\" white />\r\n            </div>\r\n        </CToast>\r\n    );\r\n}\r\n\r\nexport default VactrackAlert;","import axios from 'axios';\r\nimport authStore from 'src/stores/authStore';\r\nconst hostURL = process.env.REACT_APP_HOST_URL;\r\n\r\n\r\nconst fetchData = async (url) => {\r\n  try {\r\n    const response = await axios.get(`${hostURL}${url}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    if(error.response.status === 401){\r\n      return {\"statusCode\":401,\"message\":\"You are not authorized to send this request\"};\r\n    }else if(error.response.status === 403){\r\n      return {\"statusCode\":403,\"message\":\"The credentials you have provided are invalid\"};\r\n    }\r\n    else{\r\n      return {\"statusCode\":400,\"message\":error.response.data.message};\r\n    }\r\n  }\r\n};\r\n\r\nconst postData = async (url,postData) => {\r\n  try {\r\n    const response = await axios.post(`${hostURL}${url}`, postData);\r\n    return response.data;\r\n  } catch (error) {\r\n    if(error.response.status === 401){\r\n      return {\"statusCode\":401,\"message\":\"You are not authorized to send this request\"};\r\n    }else if(error.response.status === 403){\r\n      return {\"statusCode\":403,\"message\":\"The credentials you have provided are invalid\"};\r\n    }\r\n    else{\r\n      return {\"statusCode\":400,\"message\":error.response.data.message};\r\n    }\r\n  }\r\n};\r\n\r\nconst fetchDataAuthenticated = async (url) => {\r\n  try {\r\n    const token = authStore.getToken();\r\n    const response = await axios.get(`${hostURL}${url}`,{\r\n      headers: {\r\n        \"user-token\": token,\r\n      }\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    if(error.response.status === 401){\r\n      return {\"statusCode\":401,\"message\":\"You are not authorized to send this request\"};\r\n    }else if(error.response.status === 403){\r\n      return {\"statusCode\":403,\"message\":\"The credentials you have provided are invalid\"};\r\n    }\r\n    else{\r\n      return {\"statusCode\":400,\"message\":error.response.data.message};\r\n    }\r\n  }\r\n};\r\n\r\nconst postDataAuthenticated = async (url, postData) => {\r\n  try {\r\n    const token = authStore.getToken();\r\n    const response = await axios.post(`${hostURL}${url}`, postData,{\r\n      headers: {\r\n        \"user-token\": token,\r\n      }\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    if(error.response.status === 401){\r\n      return {\"statusCode\":401,\"message\":\"You are not authorized to send this request\"};\r\n    }else if(error.response.status === 403){\r\n      return {\"statusCode\":403,\"message\":\"The credentials you have provided are invalid\"};\r\n    }\r\n    else{\r\n      return {\"statusCode\":400,\"message\":error.response.data.message};\r\n    }\r\n    \r\n  }\r\n};\r\n\r\nexport { fetchData, postData, postDataAuthenticated, fetchDataAuthenticated };","import React, { useState,useRef } from 'react'\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardGroup,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CFormInput,\r\n  CInputGroup,\r\n  CInputGroupText,\r\n  CRow,\r\n  CToaster\r\n} from '@coreui/react-pro'\r\nimport CIcon from '@coreui/icons-react'\r\nimport { cilLockLocked } from '@coreui/icons'\r\nimport VactrackAlert  from 'src/components/vactrack/VactrackAlert';\r\nimport { postDataAuthenticated } from 'src/utils/apiService'\r\nimport authStore from 'src/stores/authStore';\r\nimport permissionStore from 'src/stores/permissionStore';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Mfa = () => {\r\n\r\n  //Router\r\n  const navigate = useNavigate();\r\n\r\n  // States\r\n  const [toast,addToast] = useState(0);\r\n  const [validated,setValidated] = useState(false);\r\n  const toaster = useRef();\r\n  const errorToast = VactrackAlert(\"Please enter the valid OTP\");\r\n\r\n  const [otpInput,setOtpInput] = useState(\"\");\r\n\r\n  const nextPage = authStore.getNextPage();\r\n\r\n  const handleSubmit = async(event) => {\r\n    const form = event.currentTarget;\r\n    if (form.checkValidity() === false) {\r\n      addToast(errorToast);\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    setValidated(true);\r\n\r\n    if(form.checkValidity() === true){\r\n      event.preventDefault();\r\n      const response = await postDataAuthenticated(\"/auth/mfa\", {\r\n        \"otp\":otpInput,\r\n      });\r\n\r\n      if(response.statusCode !== 200){\r\n        addToast(VactrackAlert(response.message));\r\n      }else{\r\n        if(nextPage === \"/reset-password\"){\r\n          authStore.setNextPage(\"/\");\r\n          navigate(\"/reset-password\");\r\n        }else{\r\n          authStore.login(response.token);\r\n          permissionStore.setPermissions(response.permissions);\r\n          navigate(\"/\");\r\n        }\r\n      }\r\n  }\r\n}\r\n\r\n  return (\r\n    <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\r\n      <CToaster className=\"p-3\" placement=\"top-end\" push={toast} ref={toaster} />\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md={6}>\r\n            <CCardGroup>\r\n              <CCard className=\"p-4\">\r\n                <CCardBody>\r\n                  <CForm className='needs-validation' noValidate validated={validated} onSubmit={handleSubmit}>\r\n                    <h1>Verify Otp</h1>\r\n                    <p className=\"text-medium-emphasis\">Please enter the OTP sent to your email</p>\r\n                    {/* <CInputGroup className=\"mb-3\">\r\n                      <CInputGroupText>\r\n                        <CIcon icon={cilUser} />\r\n                      </CInputGroupText>\r\n                      <CFormInput \r\n                        type=\"email\" \r\n                        placeholder=\"Email\"\r\n                        autoComplete=\"email\"\r\n                        feedbackValid=\"Looks good!\"\r\n                        feedbackInvalid=\"Please enter a Valid Email\"\r\n                        id='email'\r\n                        onChange={(e) => console.log(e.target.value)}\r\n                        required\r\n                      />\r\n                    </CInputGroup> */}\r\n                    <CInputGroup className=\"mb-4\">\r\n                      <CInputGroupText>\r\n                        <CIcon icon={cilLockLocked} />\r\n                      </CInputGroupText>\r\n                      <CFormInput\r\n                        type=\"password\"\r\n                        placeholder=\"OTP\"\r\n                        autoComplete=\"otp\"\r\n                        feedbackValid=\"Looks good!\"\r\n                        feedbackInvalid=\"Please enter a valid OTP\"\r\n                        minLength={6}  // Minimum length of password is 6 characters.\r\n                        maxLength={6}\r\n                        id='password'\r\n                        onChange={(e) => setOtpInput(e.target.value)}\r\n                        required\r\n                      />\r\n                    </CInputGroup>\r\n                    <CRow className='justify-content-start'>\r\n                      <CCol xs={6}>\r\n                        <CButton color=\"primary\" className=\"px-4\" type=\"submit\">\r\n                          Verify OTP\r\n                        </CButton>\r\n                      </CCol>\r\n                    </CRow>\r\n                  </CForm>\r\n                </CCardBody>\r\n              </CCard>\r\n              {/* <CCard className=\"text-white bg-primary py-5\" style={{ width: '44%' }}>\r\n                <CCardBody className=\"text-center\">\r\n                  <div>\r\n                    <h2>Sign up</h2>\r\n                    <p>\r\n                      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\r\n                      tempor incididunt ut labore et dolore magna aliqua.\r\n                    </p>\r\n                    <Link to=\"/register\">\r\n                      <CButton color=\"primary\" className=\"mt-3\" active tabIndex={-1}>\r\n                        Register Now!\r\n                      </CButton>\r\n                    </Link>\r\n                  </div>\r\n                </CCardBody>\r\n              </CCard> */}\r\n            </CCardGroup>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Mfa\r\n","export var cilLockLocked = [\"512 512\", \"<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>\"];\n"],"names":["text","color","arguments","length","undefined","_jsx","CToast","autohide","visible","className","children","_jsxs","CToastBody","CToastClose","white","hostURL","process","postData","async","url","axios","post","concat","data","error","response","status","message","postDataAuthenticated","token","authStore","getToken","headers","Mfa","navigate","useNavigate","toast","addToast","useState","validated","setValidated","toaster","useRef","errorToast","VactrackAlert","otpInput","setOtpInput","nextPage","getNextPage","CToaster","placement","push","ref","CContainer","CRow","CCol","md","CCardGroup","CCard","CCardBody","CForm","noValidate","onSubmit","form","event","currentTarget","checkValidity","preventDefault","stopPropagation","statusCode","setNextPage","login","permissionStore","setPermissions","permissions","CInputGroup","CInputGroupText","CIcon","icon","cilLockLocked","CFormInput","type","placeholder","autoComplete","feedbackValid","feedbackInvalid","minLength","maxLength","id","onChange","e","target","value","required","xs","CButton"],"sourceRoot":""}